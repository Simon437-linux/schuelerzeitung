{
    "id": "article_67682c440a612",
    "title": "test",
    "author": "Max Musterman",
    "content": "&lt;?php\r\nif ($_SERVER[&#039;REQUEST_METHOD&#039;] === &#039;POST&#039;) {\r\n    \/\/ Eingaben lesen\r\n    $title = htmlspecialchars($_POST[&#039;title&#039;], ENT_QUOTES, &#039;UTF-8&#039;);\r\n    $author = htmlspecialchars($_POST[&#039;author&#039;], ENT_QUOTES, &#039;UTF-8&#039;);\r\n    $content = htmlspecialchars($_POST[&#039;content&#039;], ENT_QUOTES, &#039;UTF-8&#039;);\r\n    $image = $_FILES[&#039;image&#039;];\r\n\r\n    \/\/ Validierung\r\n    if (!$title || !$author || !$content || !$image || $image[&#039;error&#039;] !== UPLOAD_ERR_OK) {\r\n        http_response_code(400);\r\n        echo json_encode([&#039;error&#039; =&gt; &#039;Alle Felder m\u00fcssen korrekt ausgef\u00fcllt werden, einschlie\u00dflich des Bildes.&#039;]);\r\n        exit;\r\n    }\r\n\r\n    \/\/ Verzeichnis f\u00fcr Artikel pr\u00fcfen\/erstellen\r\n    $articlesDir = &#039;..\/articles&#039;;\r\n    if (!is_dir($articlesDir)) {\r\n        if (!mkdir($articlesDir, 0777, true)) {\r\n            http_response_code(500);\r\n            echo json_encode([&#039;error&#039; =&gt; &#039;Das Verzeichnis f\u00fcr Artikel konnte nicht erstellt werden.&#039;]);\r\n            exit;\r\n        }\r\n    }\r\n\r\n    \/\/ Bild speichern\r\n    $imageName = basename($image[&quot;name&quot;]);\r\n    $targetFile = $articlesDir . &#039;\/&#039; . $imageName;\r\n    if (!move_uploaded_file($image[&#039;tmp_name&#039;], $targetFile)) {\r\n        http_response_code(500);\r\n        echo json_encode([&#039;error&#039; =&gt; &#039;Das Bild konnte nicht hochgeladen werden.&#039;]);\r\n        exit;\r\n    }\r\n\r\n    \/\/ Artikel-Daten vorbereiten\r\n    $article = [\r\n        &#039;id&#039; =&gt; uniqid(&#039;article_&#039;),\r\n        &#039;title&#039; =&gt; $title,\r\n        &#039;author&#039; =&gt; $author,\r\n        &#039;content&#039; =&gt; $content,\r\n        &#039;image&#039; =&gt; $imageName,\r\n        &#039;date&#039; =&gt; date(&#039;Y-m-d H:i:s&#039;),\r\n    ];\r\n\r\n    \/\/ Artikel in JSON-Datei speichern\r\n    $articleFilename = $articlesDir . &#039;\/&#039; . $article[&#039;id&#039;] . &#039;.json&#039;;\r\n    if (file_put_contents($articleFilename, json_encode($article, JSON_PRETTY_PRINT)) === false) {\r\n        http_response_code(500);\r\n        echo json_encode([&#039;error&#039; =&gt; &#039;Der Artikel konnte nicht gespeichert werden.&#039;]);\r\n        exit;\r\n    }\r\n\r\n    echo json_encode([&#039;success&#039; =&gt; true]);\r\n} else {\r\n    http_response_code(405); \/\/ Method Not Allowed\r\n    echo json_encode([&#039;error&#039; =&gt; &#039;Nur POST-Anfragen sind erlaubt.&#039;]);\r\n}\r\n",
    "image": "wave-color-nord.png",
    "date": "2024-12-22 16:12:04"
}